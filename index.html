<!DOCTYPE html>
<html>
<head>
  <title>Persistent Friend Tracker</title>
<style>
  body {
    font-family: sans-serif;
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    padding: 1rem;
  }

  #leftPanel {
    flex: 1;
    min-width: 300px;
    margin-right: 20px;
  }

  #rightPanel {
    flex: 1;
    min-width: 250px;
    border-left: 2px solid #eee;
    padding-left: 20px;
  }

  .name-entry {
    margin-bottom: 10px;
  }

  .calendar-entry {
    margin-bottom: 8px;
    padding: 6px;
    background-color: #f9f9f9;
    border-left: 4px solid #4caf50;
  }
</style>

</head>
<body>

  <h1>Friend Tracker</h1>

  <div id="leftPanel">
  <input id="newNameInput" placeholder="Enter a name" />
  <button onclick="addName()">Add Name</button>
  <div id="nameList"></div>
  </div>

  <div id="rightPanel">
  <h3>ðŸ“… This Month</h3>
  <div id="calendarList"></div>
  </div>


  <input id="newNameInput" placeholder="Enter a name" />
  <button onclick="addName()">Add Name</button>

  <div id="nameList"></div>

  <script>
    let nameData = [];

    // Load saved data from localStorage
    window.onload = function() {
      const savedData = localStorage.getItem('nameData');
      if (savedData) {
        nameData = JSON.parse(savedData).map(entry => ({
          name: entry.name,
          date: entry.date ? new Date(entry.date) : null
        }));
        sortAndRender();
      }
    }

    function saveToLocalStorage() {
      localStorage.setItem('nameData', JSON.stringify(nameData));
    }

    function addName() {
      const input = document.getElementById('newNameInput');
      const name = input.value.trim();
      if (!name) return;

      nameData.push({ name, date: null });
      input.value = '';
      saveToLocalStorage();
      sortAndRender();
    }

    function markDate(index) {
      nameData[index].date = new Date();
      saveToLocalStorage();
      sortAndRender();
    }
    
    function removeName(index) {
      nameData.splice(index, 1);
      saveToLocalStorage();
      sortAndRender();
    }
    
    function sortAndRender() {
      nameData.sort((a, b) => {
        if (!a.date) return -1;
        if (!b.date) return 1;
        return new Date(a.date) - new Date(b.date);
      });
      renderList();
      renderCalendar();
    }

function renderList() {
  const container = document.getElementById('nameList');
  container.innerHTML = '';

  nameData.forEach((entry, index) => {
    const div = document.createElement('div');
    div.className = 'name-entry';

    const nameText = document.createElement('span');
    nameText.textContent = `${entry.name} ${entry.date ? '- ' + new Date(entry.date).toLocaleString() : ''}`;
    
    const markBtn = document.createElement('button');
    markBtn.textContent = 'Mark';
    markBtn.onclick = () => markDate(index);

    const removeBtn = document.createElement('button');
    removeBtn.textContent = 'Remove';
    removeBtn.onclick = () => removeName(index);

    div.appendChild(nameText);
    div.appendChild(markBtn);
    div.appendChild(removeBtn);

    container.appendChild(div);
  });
}

function renderCalendar() {
  const cal = document.getElementById('calendarList');
  cal.innerHTML = '';

  const now = new Date();
  const currentMonth = now.getMonth();
  const currentYear = now.getFullYear();

  const monthlyEntries = nameData.filter(entry => {
    if (!entry.date) return false;
    const d = new Date(entry.date);
    return d.getMonth() === currentMonth && d.getFullYear() === currentYear;
  });

  if (monthlyEntries.length === 0) {
    cal.innerHTML = '<p>No dates yet this month.</p>';
    return;
  }

  monthlyEntries.forEach(entry => {
    const div = document.createElement('div');
    div.className = 'calendar-entry';
    const d = new Date(entry.date);
    div.textContent = `${entry.name} â€” ${d.toLocaleDateString()}`;
    cal.appendChild(div);
  });
}

    
  </script>

</body>
</html>
